<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 at 2020-08-03 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200803" />
    <meta http-equiv="Content-Language" content="en" />
    <title>WrzasqPl CodePipeline automation macro &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
      <script type="text/javascript" src="../js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>WrzasqPl CodePipeline automation macro</h2>
</div>
</div>
        <div class="pull-right"><a href="https://wrzasq.pl" id="bannerRight"><h2><img src="https://static.wrzasq.pl/images/wrzasqpl.png" alt="Wrzasq.pl"/></h2>
</a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Main</li>
    <li><a href="https://github.com/rafalwrzeszcz-wrzasqpl/pl.wrzasq.lambda/" class="externalLink" title="GitHub project"><span class="none"></span>GitHub project</a>  </li>
    <li><a href="https://wrzasq.pl/" class="externalLink" title="Wrzasq.pl"><span class="none"></span>Wrzasq.pl</a>  </li>
    <li><a href="https://www.facebook.com/wrzasqpl" class="externalLink" title="Wrzasq.pl @ Facebook"><span class="none"></span>Wrzasq.pl @ Facebook</a>  </li>
          <li class="nav-header">Parent Project</li>
    <li><a href="../../index.html" title="WrzasqPl Lambda"><span class="none"></span>WrzasqPl Lambda</a>  </li>
          <li class="nav-header">Guide</li>
    <li class="active"><a href="#"><span class="none"></span>CI/CD pipeline</a>
  </li>
    <li><a href="../guide/usage.html" title="Usage"><span class="none"></span>Usage</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="https://maven.apache.org/" title="Maven" class="builtBy"><img class="builtBy"  alt="Apache Maven" src="https://maven.apache.org/images/logos/maven-feather.png"    /></a>
<a href="https://wrzasq.pl" title="Wrzasq.pl" class="builtBy"><img class="builtBy"  alt="Wrzasq.pl" src="https://static.wrzasq.pl/images/wrzasqpl.png"    /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<!---
# This file is part of the pl.wrzasq.lambda.
#
# @license http://mit-license.org/ The MIT license
# @copyright 2020 © by Rafał Wrzeszcz - Wrzasq.pl.
-->
<p>One of the base components of DevOps approach is <b>CI</b>/<b>CD</b> pipeline. It&#x2019;s the way to express project deployment process in terms of automated, formalized steps. Together with <a class="externalLink" href="https://en.wikipedia.org/wiki/Infrastructure_as_code"><b>Iac</b></a> it allows to cover most of the maintenance aspects with software toolset and allow to apply all of the software development best practices to infrastructure and processes of your project.</p>
<p><b>AWS</b> provides services that cover these aspects - <b>CodePipeline</b> to build processes and <b>CloudFormation</b> to manage infrastructure. These two services play nicely with each other allowing pipeline to be managed with <b>CloudFormation</b> and automate stacks deployment with <b>CodePipeline</b>.</p>
<p>However the format is very verbose and requires a lot of boilerplate code. When following micro-services architecture and maintaining multiple pipelines this can become a noticeable overhead.</p>
<p>This macro aims to simplify and unify pipelines definition by reducing some code constructs and automating some tasks:</p>
<ul>

<li>automatically defines steps for passing artifacts between stages;</li>
<li>control pipeline structure with input parameters;</li>
<li>simplifying artifacts definition;</li>
<li>automatically detecting dependency artifacts (partially);</li>
<li>automatically ordering actions within stage based on dependencies.</li>
</ul>
<h1>Concepts</h1>
<p>Main concept of this pipeline macro is a deployment stage (not to be confused with a <b>CodePipeline</b> pipeline stage). Deployment stage is a stage of your product (very often achieved by separating on AWS accounts level, but can be also done by using prefixes or scoping eg. within different <b>VPC</b>).</p>
<p>With a <i>DevOps</i> approach you usually want to express as much as possible in the code and also control processes with such code. A deployment pipeline is one of such examples. Following a <a class="externalLink" href="https://12factor.net/dev-prod-parity">dev-prod parity</a> you most likely want to use same code to control deployment over all of your stages (eg. <code>DEV</code> -&gt; <code>TEST</code> -&gt; <code>LIVE</code>). This macro simplifies creation of such pipelines automatically handling a lot of repetitive boilerplate code. But under the hood it just generates <code>AWS::CodePipeline::Pipeline</code> resource through series of transformations.</p>
<p><b>Note:</b> It&#x2019;s important to remember that macro only controls template structure, not actual resources. Template generated on each of your deployment stages will be exactly the same and resources will be controlled by parameters passed to their respective stacks. For example on every stage you will have a template will all sources definitions, manual approval step checks, promotion actions. Actual creation of these resources will be controlled by the template parameters and conditions.</p>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2020
<a href="https://wrzasq.pl/">Rafał Wrzeszcz - Wrzasq.pl</a>.
All rights reserved.        <li id="publishDate" class="pull-right">Last Published: 2020-08-03</li>
          <li id="projectVersion" class="pull-right">Version: 1.1.14</li>
</p>
        </div>
        </div>
    </footer>
    </body>
</html>
